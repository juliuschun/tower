<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-content" />
    <title>Tower</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="theme-color" content="#d97706" />
    <link rel="apple-touch-icon" href="/pwa-192x192.png" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono@2.304/fonts/webfonts/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin />
    <style>
      @font-face {
        font-family: 'JetBrains Mono';
        src: url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono@2.304/fonts/webfonts/JetBrainsMono-Regular.woff2') format('woff2');
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: 'JetBrains Mono';
        src: url('https://cdn.jsdelivr.net/gh/JetBrains/JetBrainsMono@2.304/fonts/webfonts/JetBrainsMono-Medium.woff2') format('woff2');
        font-weight: 500;
        font-style: normal;
        font-display: swap;
      }
    </style>
  </head>
  <body class="text-gray-100" style="font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', sans-serif; background-color: var(--th-bg-primary);">
    <script>
      // Apply saved theme immediately to prevent flash
      (function() {
        var t = localStorage.getItem('theme');
        if (!t) t = window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', t);
      })();
      // Unregister stale service workers (dev mode served over production SW cache)
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(regs) {
          regs.forEach(function(r) { r.unregister(); });
        });
      }
    </script>
    <div id="root">
      <!-- Fallback shown before JS loads (or if JS fails) -->
      <div style="min-height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column;">
        <div style="color:#f59e0b;font-size:1.25rem;font-weight:bold;">Tower</div>
        <div style="color:#7888a0;font-size:0.875rem;margin-top:0.5rem;">Loading...</div>
      </div>
    </div>
    <noscript><div style="padding:2rem;text-align:center;color:#f59e0b;">JavaScript is required to use Tower.</div></noscript>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
